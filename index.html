<!-- /index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Root Position Triads Quiz</title>
  <link rel="stylesheet" href="style.css" />

  <!-- PDF generation (client-side) -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>

<body>
  <div class="app" id="appRoot">
    <header class="hero">
      <picture class="heroTitle">
        <source media="(max-width: 520px)" srcset="images/titlewrapped.png" />
        <img class="heroTitleImg" src="images/title.png" alt="Root Position Triads Quiz" />
      </picture>

      <p class="app-subtitle">
        Identify the <strong>1st (root)</strong>, <strong>3rd</strong> and <strong>5th</strong> of each triad.
        Use the piano at the top and the <strong>Information</strong> button for help.
      </p>
    </header>

    <!-- Loading / begin modal -->
    <div id="beginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="beginTitle">
      <div class="modalCard" role="document">
        <div class="modalHeader">
          <h2 id="beginTitle">Welcome üëã</h2>
        </div>

        <div class="modalBody">
          <p>
            This quiz asks you correctly identify the three notes of specific Major and Minor triads in root position
            - basically your standard common three note chords! Fill out the quiz, submit your answers and see how you did!
            You can use the piano image at the top to work notes out, and the 'Information' button for help.
          </p>

          <div class="beginOptions" aria-label="print options">
            <div class="beginOptionRow">
              <label class="beginLabel" for="questionCountSelect">Number of questions</label>
              <select id="questionCountSelect" class="beginSelect" aria-label="Number of questions">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected>10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
              </select>
            </div>
            <div id="pageAdvice" class="beginAdvice" aria-live="polite">‚Äî</div>
          </div>
        </div>

        <div class="modalFooter">
          <button id="beginBtn" class="primary pulse" type="button">Begin Game</button>
        </div>
      </div>
    </div>

    <!-- Top controls -->
    <section class="controlsPanel controlsPanelActions" aria-label="top actions">
      <div class="actionsRow actionsCentered">
        <button id="infoBtn" type="button">Information</button>
        <button id="downloadTaskBtn" type="button" disabled>Download as A4 task sheet</button>
        <button id="downloadScorecardBtn" type="button" disabled>Download scorecard</button>
        <button id="resetBtn" type="button" disabled>Reset game</button>
      </div>
    </section>

    <!-- Interactive 2-octave keyboard -->
    <section class="keyboardWrap" aria-label="piano keyboard">
      <div id="topKeyboardMount" class="mount topKeyboardMount" aria-label="Interactive keyboard"></div>
    </section>

    <!-- Quiz -->
    <main class="quizWrap" aria-label="quiz">
      <div class="quizHeaderRow">
        <div class="quizTitle" id="quizTitle">
          <img class="questionsBadge" src="images/questions.png" alt="Questions" />
        </div>
        <div class="quizMeta" id="quizMeta">‚Äî</div>
      </div>

      <ol id="questionsList" class="questionsList" aria-label="questions"></ol>

      <section class="controlsPanel controlsPanelActions" aria-label="submit">
        <div class="actionsRow actionsCentered">
          <button id="submitBtn" class="primary" type="button" disabled>Submit Answers</button>
        </div>
      </section>

      <section id="resultsPanel" class="resultsPanel hidden" aria-label="results">
        <div class="analysisCard">
          <div class="analysisLabel">Results</div>
          <div class="analysisBody" id="resultsSummary">‚Äî</div>
        </div>

        <section class="controlsPanel controlsPanelActions" aria-label="post actions">
          <div class="actionsRow actionsCentered">
            <button id="resetBtn2" type="button">Reset game</button>
          </div>
        </section>
      </section>
    </main>

    <!-- Info modal -->
    <div id="infoModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
      <div class="modalCard" role="document">
        <div class="modalHeader">
          <h2 id="infoTitle">More information üßê</h2>
        </div>
        <div class="modalBody">
          <p>
            A <strong>triad</strong> is a 3-note chord built from stacked thirds.
            In <strong>root position</strong>, the notes are the <strong>1st (root)</strong>,
            <strong>3rd</strong>, and <strong>5th</strong> of the scale.
          </p>
          <p>
            Formulas (in semitones from the root):
            <br><strong>Major</strong>: 0, +4, +7
            <br><strong>Minor</strong>: 0, +3, +7
          </p>
          <p>
            Use the keyboard to audition notes; then choose the correct note names in each dropdown.
          </p>
        </div>
        <div class="modalFooter">
          <button id="infoOk" class="primary" type="button">Got it</button>
        </div>
      </div>
    </div>

    <!-- Hidden task-sheet template (used for PDF generation) -->
    <div id="taskSheetTemplate" class="hidden" aria-hidden="true"></div>

    <!-- Hidden scorecard template (used for PDF generation) -->
    <div id="scorecardTemplate" class="hidden" aria-hidden="true"></div>
  </div>

  <script defer src="script.js"></script>
</body>
</html>